<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<style>
			/* Styles adaptés depuis entreprise.twig */
			html,
			body {
				height: 100%;
				margin: 0;
				font-family: 'Courier New', Verdana, sans-serif;
			}
			body {
				background-color: #f0f0f0;
				display: flex;
				justify-content: flex-start;
				align-items: flex-start;
			}
			nav {
				background-color: #222;
				width: 290px;
				height: 100vh;
				position: fixed;
				top: 0;
				left: 0;
				color: white;
				border-right: 5px solid #4CAF50;
				display: flex;
				flex-direction: column;
				padding-top: 20px;
			}
			nav a {
				display: flex;
				align-items: center;
				padding: 17px 20px;
				text-decoration: none;
				color: white;
				font-size: 1.3em;
				white-space: nowrap;
			}
			nav a img {
				width: 20px;
				height: auto;
				margin-right: 10px;
			}
			nav a.actif {
				background-color: #4CAF50;
			}
			nav a:hover {
				background-color: #404040;
			}
			.content {
				margin-left: 290px;
				padding: 20px;
				width: calc(100% - 290px);
			}
			.search-form {
				margin-bottom: 20px;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}
			.search-form input,
			.search-form select,
			.search-form button {
				padding: 10px;
				margin-right: 10px;
				font-size: 1em;
			}
			table {
				width: 100%;
				border-collapse: collapse;
				margin-top: 20px;
				background-color: white;
			}
			th,
			td {
				border: 1px solid #ccc;
				padding: 10px;
				text-align: left;
			}
			th {
				background-color: #f4f4f4;
			}
			.actions button {
				margin-right: 5px;
				padding: 5px 10px;
				background-color: #16a085;
				color: white;
				border: none;
				border-radius: 3px;
				cursor: pointer;
			}
			.actions button:hover {
				background-color: #1abc9c;
			}
			.actions .delete {
				background-color: #e74c3c;
			}
			.actions .delete:hover {
				background-color: #c0392b;
			}
			.link-button {
				background-color: #3498db;
				color: white;
				padding: 5px 10px;
				text-decoration: none;
				border-radius: 3px;
			}
			.link-button:hover {
				background-color: #2980b9;
			}
		</style>
	</head>
	<body>
		<!-- Navbar -->
		<nav>
			<a href="index.php" class="actif"><img src="../src/home.png" alt="Accueil">Accueil</a>
			<a href="entreprise.php"><img src="../src/entreprise.png" alt="Entreprise">Entreprise</a>
			<a href="stagiaire.php"><img src="../src/stage.png" alt="Stagiaire">Stagiaire</a>
			<a href="#"><img src="../src/inscrire.png" alt="Inscription">Inscription</a>
			<a href="#"><img src="../src/aide.png" alt="Aide">Aide</a>
			<a href="#"><img src="../src/deconnexion.png" alt="Déconnexion">Déconnexion</a>
		</nav>

		<!-- Contenu principal -->
		<div
			class="content">
			<!-- Formulaire de recherche -->
			<form class="search-form" method="GET" action="entreprise_trie.php">
				<input type="text" name="nom" placeholder="Nom de l'entreprise" value="{{ filters.nom }}"/>
				<select name="specialite">
					<option value="">Toutes les spécialités</option>
					<option value="SLAM" {% if filters.specialite == 'SLAM' %} selected {% endif %}>SLAM</option>
					<option value="SISR" {% if filters.specialite == 'SISR' %} selected {% endif %}>SISR</option>
					<option value="AM" {% if filters.specialite == 'AM' %} selected {% endif %}>AM</option>
					<option value="SN" {% if filters.specialite == 'SN' %} selected {% endif %}>SN</option>
					<option value="CG" {% if filters.specialite == 'CG' %} selected {% endif %}>CG</option>
					<option value="NRC" {% if filters.specialite == 'NRC' %} selected {% endif %}>NRC</option>
				</select>
				<select name="niveau">
					<option value="">Tous les niveaux</option>
					<option value="BAC+1" {% if filters.niveau == 'BAC+1' %} selected {% endif %}>BAC+1</option>
					<option value="BAC+1/BAC+2" {% if filters.niveau == 'BAC+1/BAC+2' %} selected {% endif %}>BAC+1/BAC+2</option>
					<option value="BAC+2" {% if filters.niveau == 'BAC+2' %} selected {% endif %}>BAC+2</option>
				</select>
				<button type="submit">Rechercher</button>
			</form>

			<!-- Tableau des entreprises -->
			<table>
				<thead>
					<tr>
						<th>Opération</th>
						<th>Entreprise</th>
						<th>Contact</th>
						<th>Responsable</th>
						<th>Adresse</th>
						<th>Site</th>
						<th>Spécialité</th>
					</tr>
				</thead>
				<tbody>
					{% if entreprises|length > 0 %}
						{% for entreprise in entreprises %}
							<tr>
								<td>
									<button>Modifier</button>
									<button>Supprimer</button>
								</td>
								<td>{{ entreprise.raison_sociale }}</td>
								<td>{{ entreprise.nom_contact }}</td>
								<td>{{ entreprise.nom_resp }}</td>
								<td>{{ entreprise.rue_entreprise }}</td>
								<td>
									<a href="{{ entreprise.site_entreprise }}" target="_blank">Visiter</a>
								</td>
								<td>{{ entreprise.specialite }}</td>
							</tr>
						{% endfor %}
					{% else %}
						<tr>
							<td colspan="7">Aucune entreprise trouvée avec ces critères.</td>
						</tr>
					{% endif %}
				</tbody>
			</table>
		</div>
	</body>
</html>
